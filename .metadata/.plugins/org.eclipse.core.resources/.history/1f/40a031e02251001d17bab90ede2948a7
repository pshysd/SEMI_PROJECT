<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
	<!-- jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js" ></script>
    <!-- iamport.payment.js -->
    <script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.2.0.js"></script>
</head>
<body>
	
	<script>
        // 문서가 로딩된 후 바로 실행
        $(function() {
	
	        function requestPay() {
	            IMP.init("imp00813715"); // 가맹점 식별코드
	            // IMP.request_pay(param, callback) 결제창 호출
	            IMP.request_pay({ // param
	                pg: "html5_inicis", // PG사 코드값 (이니시스 웹표준)
	                pay_method: "card", // 결제방법
	                merchant_uid: "merchant_" + new Date().getTime(), // 가맹점 주문번호 (중복되지 않게 임의로, 결제가 승인된 주문번호로는 재결제 불가)
	                name: "JV아트센터 2022 전시", // 결제창에 노출될 상품명 (PG사마다 차이 있지만, 16자 이내 권장)
	                amount: 5000, // 가격
	                buyer_email: "choigun159@naver.com", // 구매자 메일
	                buyer_name: "홍길동", // 구매자 이름
	                buyer_tel: "010-4242-4242", // 구매자 전화번호 (필수)
	            }, function (rsp) { // callback
	                // callback 속성으로 success (boolean) 반환함
	                if (rsp.success) {
	                    // 결제 성공 시 로직
	                    // imp_uid : 아임포트 고유 결제번호 (null 일 수 있음), merchant_uid : 가맹점 고유 주문번호
	                    alert("[결제 완료] => imp_uid : " + rsp.imp_uid + ", merchant_uid : " + rsp.merchant_uid);
	                } else {
	                    // 결제 실패 시 로직
	                    // 결제 실패시 코드 : error_code, 메세지 : error_msg
	                    alert("[결제 실패] => imp_uid : " + rsp.imp_uid + ", merchant_uid : " + rsp.merchant_uid + ", error_code : " + rsp.error_code + ", error_msg : " + rsp.error_msg);
	                }
	            });
	        }

        });
    </script>
	
</body>
</html>